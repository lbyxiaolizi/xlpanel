<!DOCTYPE html>
<html lang="{{ .Lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ .Description }}">
    <title>{{ if .Title }}{{ .Title }} - {{ end }}{{ t "common.app_name" }}</title>
    <link rel="icon" type="image/svg+xml" href="/static/{{ .Theme }}/assets/images/favicon.svg">
    <link rel="stylesheet" href="/static/{{ .Theme }}/assets/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    {{ if .ExtraCSS }}{{ .ExtraCSS }}{{ end }}
</head>
<body>
    <div class="page-shell">
        <header class="topbar">
            <div class="container topbar-inner">
                <a class="brand" href="/">
                    <span class="brand-mark">OH</span>
                    <span>{{ t "common.app_name" }}</span>
                </a>
                <button class="icon-button mobile-only" data-nav-toggle aria-label="Toggle navigation">☰</button>
                <nav class="nav-panel">
                    <div class="nav-links">
                        <a class="nav-link" href="/">{{ t "nav.home" }}</a>
                        <a class="nav-link" href="/products">{{ t "nav.products" }}</a>
                        <a class="nav-link" href="/pricing">{{ t "nav.pricing" }}</a>
                        <a class="nav-link" href="/features">{{ t "nav.features" }}</a>
                        <a class="nav-link" href="/docs">{{ t "nav.docs" }}</a>
                        <a class="nav-link" href="/support">{{ t "nav.support" }}</a>
                    </div>
                    <div class="nav-actions">
                        <button class="icon-button" data-theme-toggle aria-label="Toggle theme">◐</button>
                        <div>
                            {{ if eq .Lang "zh" }}
                            <a class="button button-ghost" href="?lang=en">EN</a>
                            {{ else }}
                            <a class="button button-ghost" href="?lang=zh">中文</a>
                            {{ end }}
                        </div>
                        {{ if .User }}
                        <a href="/client" class="button button-outline">{{ t "nav.dashboard" }}</a>
                        <a href="/logout" class="button button-primary">{{ t "nav.logout" }}</a>
                        {{ else }}
                        <a href="/login" class="button button-outline">{{ t "nav.login" }}</a>
                        <a href="/register" class="button button-primary">{{ t "nav.register" }}</a>
                        {{ end }}
                    </div>
                </nav>
            </div>
        </header>

        <main class="page-main">
            <div class="container">
                {{ if .Flash }}
                <div class="alert alert-{{ .Flash.Type }}">{{ .Flash.Message }}</div>
                {{ end }}
                {{ template "content" . }}
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <div class="footer-grid">
                    <div>
                        <div class="footer-title">{{ t "common.app_name" }}</div>
                        <p>{{ t "common.app_tagline" }}</p>
                    </div>
                    <div>
                        <div class="footer-title">{{ t "footer.product.title" }}</div>
                        <div class="footer-links">
                            <a href="/features">{{ t "footer.product.features" }}</a>
                            <a href="/pricing">{{ t "footer.product.pricing" }}</a>
                            <a href="/roadmap">{{ t "footer.product.roadmap" }}</a>
                            <a href="/changelog">{{ t "footer.product.changelog" }}</a>
                        </div>
                    </div>
                    <div>
                        <div class="footer-title">{{ t "footer.resources.title" }}</div>
                        <div class="footer-links">
                            <a href="/docs">{{ t "footer.resources.docs" }}</a>
                            <a href="/api">{{ t "footer.resources.api" }}</a>
                            <a href="/guides">{{ t "footer.resources.guides" }}</a>
                            <a href="/blog">{{ t "footer.resources.blog" }}</a>
                        </div>
                    </div>
                    <div>
                        <div class="footer-title">{{ t "footer.company.title" }}</div>
                        <div class="footer-links">
                            <a href="/about">{{ t "footer.company.about" }}</a>
                            <a href="/contact">{{ t "footer.company.contact" }}</a>
                            <a href="/privacy">{{ t "footer.company.privacy" }}</a>
                            <a href="/terms">{{ t "footer.company.terms" }}</a>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <span>{{ t "common.copyright" .Year }}</span>
                    <span>{{ t "common.powered_by" }}</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="/static/{{ .Theme }}/assets/js/main.js"></script>
    {{ if .ExtraJS }}{{ .ExtraJS }}{{ end }}
</body>
</html>
