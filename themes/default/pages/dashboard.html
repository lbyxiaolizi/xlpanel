{{ define "content" }}
<section class="dashboard">
    <div class="container">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div>
                <h1>Welcome back, {{ .User.FirstName }}!</h1>
                <p>Here's what's happening with your services</p>
            </div>
            <div class="dashboard-actions">
                <a href="/products" class="btn btn-primary">Order New Service</a>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-4 stats-grid">
            <div class="card stat-card">
                <div class="stat-icon success">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Active Services</div>
                    <div class="stat-value">{{ .Stats.ActiveServices }}</div>
                </div>
            </div>

            <div class="card stat-card">
                <div class="stat-icon warning">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Pending Invoices</div>
                    <div class="stat-value">{{ .Stats.PendingInvoices }}</div>
                </div>
            </div>

            <div class="card stat-card">
                <div class="stat-icon info">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Open Tickets</div>
                    <div class="stat-value">{{ .Stats.OpenTickets }}</div>
                </div>
            </div>

            <div class="card stat-card">
                <div class="stat-icon primary">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <div class="stat-label">Total Spent</div>
                    <div class="stat-value">{{ .Currency }}{{ .Stats.TotalSpent }}</div>
                </div>
            </div>
        </div>

        <!-- Services and Invoices Grid -->
        <div class="dashboard-grid">
            <!-- Active Services -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Active Services</h3>
                    <a href="/services" class="view-all">View All →</a>
                </div>
                <div class="card-body">
                    <div class="services-list">
                        {{ range .Services }}
                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">{{ .ProductName }}</div>
                                <div class="service-meta">
                                    <span class="service-domain">{{ .Hostname }}</span>
                                    <span class="service-price">{{ .Currency }}{{ .Price }}/{{ .BillingCycle }}</span>
                                </div>
                            </div>
                            <div class="service-status">
                                <span class="status-badge status-{{ .Status }}">{{ .Status }}</span>
                                <div class="service-actions">
                                    <a href="/services/{{ .ID }}" class="action-btn" title="Manage">
                                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>

            <!-- Recent Invoices -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Recent Invoices</h3>
                    <a href="/invoices" class="view-all">View All →</a>
                </div>
                <div class="card-body">
                    <div class="invoices-list">
                        {{ range .Invoices }}
                        <div class="invoice-item">
                            <div class="invoice-info">
                                <div class="invoice-number">{{ .InvoiceNumber }}</div>
                                <div class="invoice-date">{{ .CreatedAt }}</div>
                            </div>
                            <div class="invoice-amount">
                                <div class="amount">{{ .Currency }}{{ .Total }}</div>
                                {{ if eq .Status "unpaid" }}
                                <a href="/invoices/{{ .ID }}/pay" class="btn btn-sm btn-primary">Pay Now</a>
                                {{ else }}
                                <span class="status-badge status-{{ .Status }}">{{ .Status }}</span>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Support Tickets -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Recent Support Tickets</h3>
                <a href="/support/new" class="btn btn-sm btn-primary">New Ticket</a>
            </div>
            <div class="card-body">
                <div class="tickets-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Status</th>
                                <th>Priority</th>
                                <th>Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{ range .Tickets }}
                            <tr>
                                <td>
                                    <a href="/tickets/{{ .ID }}" class="ticket-link">{{ .Subject }}</a>
                                </td>
                                <td>
                                    <span class="status-badge status-{{ .Status }}">{{ .Status }}</span>
                                </td>
                                <td>
                                    <span class="priority-badge priority-{{ .Priority }}">{{ .Priority }}</span>
                                </td>
                                <td>{{ .UpdatedAt }}</td>
                                <td>
                                    <a href="/tickets/{{ .ID }}" class="btn btn-sm btn-outline">View</a>
                                </td>
                            </tr>
                            {{ end }}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.dashboard {
    padding: 2rem 0;
}

.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.dashboard-header h1 {
    font-size: 2rem;
    margin-bottom: 0.25rem;
}

.dashboard-header p {
    color: var(--text-tertiary);
    margin-bottom: 0;
}

.stats-grid {
    margin-bottom: 2rem;
}

.stat-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.5rem;
}

.stat-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.stat-icon.success { background: rgba(72, 187, 120, 0.1); color: var(--success); }
.stat-icon.warning { background: rgba(237, 137, 54, 0.1); color: var(--warning); }
.stat-icon.info { background: rgba(66, 153, 225, 0.1); color: var(--info); }
.stat-icon.primary { background: rgba(102, 126, 234, 0.1); color: var(--primary); }

.stat-info {
    flex: 1;
}

.stat-label {
    font-size: 0.875rem;
    color: var(--text-tertiary);
    margin-bottom: 0.25rem;
}

.stat-value {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
}

.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.view-all {
    font-size: 0.875rem;
    color: var(--primary);
    font-weight: 500;
}

.services-list,
.invoices-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.service-item,
.invoice-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    transition: var(--transition);
}

.service-item:hover,
.invoice-item:hover {
    background: var(--bg-tertiary);
}

.service-name,
.invoice-number {
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.service-meta,
.invoice-date {
    font-size: 0.875rem;
    color: var(--text-tertiary);
    display: flex;
    gap: 1rem;
}

.service-status {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.status-active { background: rgba(72, 187, 120, 0.1); color: var(--success); }
.status-pending { background: rgba(237, 137, 54, 0.1); color: var(--warning); }
.status-suspended { background: rgba(245, 101, 101, 0.1); color: var(--error); }
.status-paid { background: rgba(72, 187, 120, 0.1); color: var(--success); }
.status-unpaid { background: rgba(245, 101, 101, 0.1); color: var(--error); }
.status-open { background: rgba(66, 153, 225, 0.1); color: var(--info); }
.status-closed { background: rgba(160, 174, 192, 0.1); color: var(--text-tertiary); }

.priority-badge {
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
}

.priority-high { background: rgba(245, 101, 101, 0.1); color: var(--error); }
.priority-medium { background: rgba(237, 137, 54, 0.1); color: var(--warning); }
.priority-low { background: rgba(66, 153, 225, 0.1); color: var(--info); }

.action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: var(--radius-sm);
    background: transparent;
    color: var(--text-secondary);
    transition: var(--transition);
}

.action-btn:hover {
    background: var(--primary);
    color: white;
}

.tickets-table {
    overflow-x: auto;
}

.tickets-table table {
    width: 100%;
    border-collapse: collapse;
}

.tickets-table th,
.tickets-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--border);
}

.tickets-table th {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.875rem;
}

.tickets-table td {
    color: var(--text-secondary);
}

.ticket-link {
    color: var(--primary);
    font-weight: 500;
}

@media (max-width: 1024px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .dashboard-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .dashboard-actions {
        width: 100%;
    }
    
    .dashboard-actions .btn {
        width: 100%;
    }
    
    .service-item,
    .invoice-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
}
</style>
{{ end }}
