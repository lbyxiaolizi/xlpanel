{{define "title"}}Domains - {{.Config.SiteName}}{{end}}

{{define "content"}}
<div class="container-fluid px-4">
    <h1 class="mt-4">Domains</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a href="/client">Dashboard</a></li>
        <li class="breadcrumb-item active">Domains</li>
    </ol>

    <!-- Action Buttons -->
    <div class="row mb-4">
        <div class="col">
            <a href="/client/domains/register" class="btn btn-primary">
                <i class="fas fa-plus"></i> Register New Domain
            </a>
            <a href="/client/domains/transfer" class="btn btn-secondary">
                <i class="fas fa-exchange-alt"></i> Transfer Domain
            </a>
        </div>
    </div>

    <!-- Domains Table -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-globe me-1"></i>
            My Domains
        </div>
        <div class="card-body">
            <table id="domainsTable" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Domain</th>
                        <th>Registration Date</th>
                        <th>Expiry Date</th>
                        <th>Status</th>
                        <th>Auto-Renew</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .Domains}}
                    <tr>
                        <td>
                            <strong>{{.DomainName}}</strong>
                            {{if .IDNName}}<br><small class="text-muted">IDN: {{.IDNName}}</small>{{end}}
                        </td>
                        <td>{{.RegisteredAt.Format "Jan 02, 2006"}}</td>
                        <td>
                            {{.ExpiresAt.Format "Jan 02, 2006"}}
                            {{if .IsExpiringSoon}}
                            <span class="badge bg-warning">Expiring Soon</span>
                            {{end}}
                        </td>
                        <td>
                            {{if eq .Status "active"}}
                            <span class="badge bg-success">Active</span>
                            {{else if eq .Status "pending"}}
                            <span class="badge bg-warning">Pending</span>
                            {{else if eq .Status "expired"}}
                            <span class="badge bg-danger">Expired</span>
                            {{else if eq .Status "redemption"}}
                            <span class="badge bg-danger">Redemption</span>
                            {{else}}
                            <span class="badge bg-secondary">{{.Status}}</span>
                            {{end}}
                        </td>
                        <td>
                            {{if .AutoRenew}}
                            <span class="badge bg-success">On</span>
                            {{else}}
                            <span class="badge bg-secondary">Off</span>
                            {{end}}
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="/client/domains/{{.ID}}" class="btn btn-outline-primary" title="Manage">
                                    <i class="fas fa-cog"></i>
                                </a>
                                <a href="/client/domains/{{.ID}}/dns" class="btn btn-outline-secondary" title="DNS">
                                    <i class="fas fa-server"></i>
                                </a>
                                <a href="/client/domains/{{.ID}}/renew" class="btn btn-outline-success" title="Renew">
                                    <i class="fas fa-sync"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {{else}}
                    <tr>
                        <td colspan="6" class="text-center py-4">
                            <p class="text-muted mb-3">You don't have any domains yet.</p>
                            <a href="/client/domains/register" class="btn btn-primary">Register Your First Domain</a>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Domain Search -->
    <div class="card">
        <div class="card-header">
            <i class="fas fa-search me-1"></i>
            Search for a Domain
        </div>
        <div class="card-body">
            <form action="/client/domains/search" method="GET" class="row g-3">
                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" name="domain" class="form-control form-control-lg" placeholder="Enter your desired domain name">
                        <button type="submit" class="btn btn-primary btn-lg">Search</button>
                    </div>
                </div>
                <div class="col-md-4">
                    <select name="tld" class="form-select form-select-lg">
                        <option value="">All TLDs</option>
                        <option value="com">.com</option>
                        <option value="net">.net</option>
                        <option value="org">.org</option>
                        <option value="io">.io</option>
                        <option value="co">.co</option>
                    </select>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('domainsTable').rows.length > 2) {
        new simpleDatatables.DataTable("#domainsTable", {
            searchable: true,
            sortable: true,
            perPage: 10
        });
    }
});
</script>
{{end}}
